@page "/Admin/ManagerDashboard"
@model Apartment.Pages.Admin.ManagerDashboardModel
@{
    ViewData["Title"] = "Manager Portal";
    Layout = "_Layout";
    var pesoCulture = CultureInfo.CreateSpecificCulture("en-PH");
}

<div class="matcha-dashboard d-flex">
    @await Html.PartialAsync("_AdminSidebar")

    <div class="matcha-main">
        <header class="matcha-header">
            <div>
                <h1 class="matcha-h1">System Overview</h1>
                <p class="matcha-subtitle">
                    Welcome back,
                    <span class="matcha-tenant-email">
                        @Model.Username
                    </span>. Hereâ€™s the current property snapshot.
                </p>
            </div>
        </header>

        <section class="matcha-section mb-5">
            <div class="row g-4">
                <div class="col-lg-2 col-md-4 col-sm-6">
                    <article class="matcha-card h-100">
                        <div class="matcha-card-body">
                            <div class="d-flex justify-content-between align-items-start">
                                <div>
                                    <div class="matcha-body-s text-muted text-uppercase mb-1">Active Tenants</div>
                                    <div class="matcha-amount">@Model.ActiveTenants</div>
                                    <div class="matcha-body-s text-muted">Current leases</div>
                                </div>
                                <div class="matcha-card-icon matcha-card-icon-unit">
                                    <i class="bi bi-people"></i>
                                </div>
                            </div>
                        </div>
                    </article>
                </div>

                <div class="col-lg-2 col-md-4 col-sm-6">
                    <article class="matcha-card h-100">
                        <div class="matcha-card-body">
                            <div class="d-flex justify-content-between align-items-start">
                                <div>
                                    <div class="matcha-body-s text-muted text-uppercase mb-1">Occupied Units</div>
                                    <div class="matcha-amount">@Model.OccupiedUnits</div>
                                    <div class="matcha-body-s text-muted">Units with tenants</div>
                                </div>
                                <div class="matcha-card-icon matcha-card-icon-unit">
                                    <i class="bi bi-building"></i>
                                </div>
                            </div>
                        </div>
                    </article>
                </div>

                <div class="col-lg-2 col-md-4 col-sm-6">
                    <article class="matcha-card h-100">
                        <div class="matcha-card-body">
                            <div class="d-flex justify-content-between align-items-start">
                                <div>
                                    <div class="matcha-body-s text-muted text-uppercase mb-1">Open Tickets</div>
                                    <div class="matcha-amount">@Model.OpenServiceTickets</div>
                                    <div class="matcha-body-s text-muted">Requests in progress</div>
                                </div>
                                <div class="matcha-card-icon matcha-card-icon-request">
                                    <i class="bi bi-tools"></i>
                                </div>
                            </div>
                        </div>
                    </article>
                </div>

                <div class="col-lg-2 col-md-4 col-sm-6">
                    <article class="matcha-card h-100">
                        <div class="matcha-card-body">
                            <div class="d-flex justify-content-between align-items-start">
                                <div>
                                    <div class="matcha-body-s text-muted text-uppercase mb-1">Pending Bills</div>
                                    <div class="matcha-amount">@Model.PendingBills</div>
                                    <div class="matcha-body-s text-muted">Needs follow-up</div>
                                </div>
                                <div class="matcha-card-icon matcha-card-icon-payment">
                                    <i class="bi bi-receipt"></i>
                                </div>
                            </div>
                        </div>
                    </article>
                </div>

                <div class="col-lg-4 col-md-8 col-sm-12">
                    <article class="matcha-card matcha-card-accent h-100">
                        <div class="matcha-card-body">
                            <div class="d-flex justify-content-between align-items-start">
                                <div>
                                    <div class="matcha-body-s text-muted text-uppercase mb-1">Total Revenue</div>
                                    <div class="matcha-amount">
                                        @Model.TotalRevenue.ToString("C", pesoCulture)
                                    </div>
                                    <div class="matcha-body-s text-muted">Total payments received</div>
                                </div>
                                <div class="matcha-card-icon matcha-card-icon-payment">
                                    <i class="bi bi-cash-stack"></i>
                                </div>
                            </div>
                        </div>
                    </article>
                </div>
            </div>
        </section>

        <section class="matcha-section mb-4">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h2 class="matcha-h3 mb-0">Core Management Actions</h2>
            </div>
            <div class="row g-4">
                <div class="col-md-4">
                    <article class="matcha-card matcha-card-soft h-100">
                        <div class="matcha-card-body d-flex flex-column">
                            <h3 class="matcha-card-title mb-1">Tenant Management</h3>
                            <p class="matcha-body-s text-muted mb-3">
                                View tenant details and manage occupancy quickly.
                            </p>
                            <div class="mt-auto">
                                <a asp-page="/Admin/ManageTenants" class="matcha-btn-primary">
                                    Manage Tenants
                                </a>
                            </div>
                        </div>
                    </article>
                </div>

                <div class="col-md-4">
                    <article class="matcha-card matcha-card-soft h-100">
                        <div class="matcha-card-body d-flex flex-column">
                            <h3 class="matcha-card-title mb-1">Unit Management</h3>
                            <p class="matcha-body-s text-muted mb-3">
                                Check unit occupancy and adjust rent arrangements.
                            </p>
                            <div class="mt-auto">
                                <a asp-page="/Admin/ManageApartments" class="matcha-btn-secondary">
                                    Manage Units
                                </a>
                            </div>
                        </div>
                    </article>
                </div>

                <div class="col-md-4">
                    <article class="matcha-card matcha-card-soft h-100">
                        <div class="matcha-card-body d-flex flex-column">
                            <h3 class="matcha-card-title mb-1">Billing &amp; Generation</h3>
                            <p class="matcha-body-s text-muted mb-3">
                                Generate and review monthly bills for all active leases.
                            </p>
                            <div class="mt-auto">
                                <a asp-page="/Admin/GenerateBills" class="matcha-btn-secondary">
                                    Generate Bills
                                </a>
                            </div>
                        </div>
                    </article>
                </div>

                <div class="col-md-4">
                    <article class="matcha-card matcha-card-soft h-100">
                        <div class="matcha-card-body d-flex flex-column">
                            <h3 class="matcha-card-title mb-1">Payment Processing</h3>
                            <p class="matcha-body-s text-muted mb-3">
                                Record and confirm payments against outstanding balances.
                            </p>
                            <div class="mt-auto">
                                <a asp-page="/Admin/RecordPayments" class="matcha-btn-secondary">
                                    Record Payments
                                </a>
                            </div>
                        </div>
                    </article>
                </div>

                <div class="col-md-4">
                    <article class="matcha-card matcha-card-soft h-100">
                        <div class="matcha-card-body d-flex flex-column">
                            <h3 class="matcha-card-title mb-1">Reporting &amp; Summary</h3>
                            <p class="matcha-body-s text-muted mb-3">
                                Access high-level financial insights at a glance.
                            </p>
                            <div class="mt-auto">
                                <a asp-page="/Admin/BillingSummary" class="matcha-btn-secondary">
                                    View Reports
                                </a>
                            </div>
                        </div>
                    </article>
                </div>
            </div>
        </section>
    </div>
</div>
