<!-- Logout Confirmation Modal - Reusable Component -->
<div class="modal fade" id="logoutConfirmModal" tabindex="-1" aria-labelledby="logoutConfirmModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title" id="logoutConfirmModalLabel">
                    <i class="bi bi-exclamation-triangle me-2"></i>Confirm Logout
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="text-center mb-3">
                    <i class="bi bi-box-arrow-right text-danger" style="font-size: 3rem;"></i>
                </div>
                <p class="text-center mb-0">
                    <strong>Are you sure you want to logout?</strong>
                </p>
                <p class="text-muted text-center small mt-2 mb-0">
                    Any unsaved changes may be lost.
                </p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                    <i class="bi bi-x-circle me-2"></i>Cancel
                </button>
                <a id="logoutConfirmButton" asp-page="/Logout" class="btn btn-danger">
                    <i class="bi bi-box-arrow-right me-2"></i>Yes, Logout
                </a>
            </div>
        </div>
    </div>
</div>

<script>
    // Handle logout confirmation modal - Reusable across all pages
    // Bootstrap automatically handles links with data-bs-toggle="modal" and data-bs-target="#logoutConfirmModal"
    // This script is for any additional logout links that need manual handling
    document.addEventListener('DOMContentLoaded', function() {
        // Function to handle logout click for links without Bootstrap modal attributes
        function handleLogoutClick(e) {
            e.preventDefault();
            e.stopPropagation();
            
            // Show the modal using Bootstrap 5
            const modalElement = document.getElementById('logoutConfirmModal');
            if (modalElement) {
                const modal = bootstrap.Modal.getOrCreateInstance(modalElement);
                modal.show();
            }
        }

        // Handle direct links to /Logout that have the class "logout-link" or data-logout-confirm="true"
        // (but don't have data-bs-toggle="modal" - those are handled automatically by Bootstrap)
        const directLogoutLinks = document.querySelectorAll('a[href*="Logout"].logout-link:not([data-bs-toggle]), a[href*="Logout"][data-logout-confirm="true"]:not([data-bs-toggle])');
        directLogoutLinks.forEach(function(link) {
            link.addEventListener('click', handleLogoutClick);
        });
    });
</script>

