@using System.Security.Claims
@{
    var username = User.Identity?.Name ?? "Unknown User";
    var currentPage = ViewContext.RouteData.Values["page"]?.ToString() ?? "";
}

<div class="sidebar">
    <div class="sidebar-brand">
        <h4 class="text-white mb-0">MANAGER PORTAL</h4>
    </div>
    
    <div class="px-3 py-3 border-bottom border-white border-opacity-10">
        <p class="text-white mb-1 small">Welcome, <strong>@username</strong></p>
        <span class="badge bg-light text-dark">Manager</span>
    </div>

    <nav class="sidebar-nav px-2 py-3">
        <a asp-page="/ManagerDashboard" class="nav-link @(currentPage.Contains("ManagerDashboard") ? "active" : "")">
            <i class="bi bi-speedometer2 me-2"></i>System Overview
        </a>
        <a asp-page="/ManageTenants" class="nav-link @(currentPage.Contains("ManageTenants") ? "active" : "")">
            <i class="bi bi-person-lines-fill me-2"></i>Tenant Management
        </a>
        <a asp-page="/ManageApartments" class="nav-link @(currentPage.Contains("ManageApartments") ? "active" : "")">
            <i class="bi bi-house-door-fill me-2"></i>Unit Management
        </a>
        <a asp-page="/GenerateBills" class="nav-link @(currentPage.Contains("GenerateBills") ? "active" : "")">
            <i class="bi bi-receipt me-2"></i>Billing & Generation
        </a>
        <a asp-page="/RecordPayments" class="nav-link @(currentPage.Contains("RecordPayments") ? "active" : "")">
            <i class="bi bi-cash-stack me-2"></i>Payment Processing
        </a>
        <a asp-page="/BillingSummary" class="nav-link @(currentPage.Contains("BillingSummary") ? "active" : "")">
            <i class="bi bi-graph-up me-2"></i>Reporting & Summary
        </a>
        <a href="#" class="nav-link mt-4" data-bs-toggle="modal" data-bs-target="#logoutConfirmModal">
            <i class="bi bi-box-arrow-right me-2"></i>Logout
        </a>
    </nav>
</div>

<style>
    .sidebar {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        min-height: 100vh;
        position: fixed;
        left: 0;
        top: 0;
        width: 280px;
        z-index: 1000;
    }

    .sidebar-brand {
        padding: 1.5rem;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .sidebar-nav {
        padding: 1rem 0;
    }

    .sidebar-nav .nav-link {
        color: rgba(255, 255, 255, 0.8);
        padding: 0.75rem 1rem;
        margin: 0.25rem 0;
        border-radius: 0.5rem;
        text-decoration: none;
        display: flex;
        align-items: center;
        transition: all 0.3s ease;
    }

    .sidebar-nav .nav-link:hover,
    .sidebar-nav .nav-link.active {
        background: rgba(255, 255, 255, 0.1);
        color: white;
    }
</style>
